<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>API Gateway Invocations • lambdr</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="API Gateway Invocations">
<meta property="og:description" content="lambdr">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lambdr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/api-gateway-invocations.html">API Gateway Invocations</a>
    </li>
    <li>
      <a href="../articles/context.html">Using invocation context</a>
    </li>
    <li>
      <a href="../articles/eventbridge-and-sns-invocations.html">EventBridge and SNS Invocations</a>
    </li>
    <li>
      <a href="../articles/lambda-runtime-in-container.html">Placing an R Lambda Runtime in a Container</a>
    </li>
    <li>
      <a href="../articles/package-structure.html">Package Structure</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/mdneuzerling/lambdr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="api-gateway-invocations_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>API Gateway Invocations</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/mdneuzerling/lambdr/blob/HEAD/vignettes/api-gateway-invocations.Rmd" class="external-link"><code>vignettes/api-gateway-invocations.Rmd</code></a></small>
      <div class="hidden name"><code>api-gateway-invocations.Rmd</code></div>

    </div>

    
    
<p>Invocations via an API Gateway require extra care when parsing the input event, and when formatting results. For the most part, <code>lambdr</code> will handle this automatically. But for highly custom serialisation/deserialisation or edge cases it may be helpful to understand how content via API Gateways is structured and responded to.</p>
<div class="section level2">
<h2 id="events-via-api-gateways">Events via API Gateways<a class="anchor" aria-label="anchor" href="#events-via-api-gateways"></a>
</h2>
<p>When a Lambda runtime, like that implemented by <code>lambdr</code>, starts listening for inputs it queries the “next invocation” HTTP endpoint. The response to this is what’s called here an <em>event</em>. The content of this event contains the arguments (if any) to the function. After the result has been calculate, the runtime must format the result and submit it to the “result” HTTP endpoint.</p>
<p>With direct invocation the content of the event contains a string which — when interpreted as JSON — gives the arguments for the handler function. When a Lambda is invoked via an API Gateway then the content of the event contains significantly more detail and requires careful parsing.</p>
<p>There are two types of API Gateways to consider: REST and HTML.</p>
<div class="section level3">
<h3 id="rest-api-gateway-events">REST API Gateway events<a class="anchor" aria-label="anchor" href="#rest-api-gateway-events"></a>
</h3>
<p>An example of REST API Gateway event content is given at the bottom of this section but the two most important sections are <code>body</code> and <code>queryStringParameters</code>.</p>
<p>The <code>queryStringParameters</code> contain standard JSON. So if the request contains a parameter <code>?number=9</code> in the query then the event will contain <code>"queryStringParameters": {"number": "9"}</code> (note the string).</p>
<p>The <code>body</code> of the event contains the data passed during a <code>POST</code> operation. It contains <em>stringified</em> JSON. That is, instead of <code>"body": {"number": 9}</code> we would see <code>"body": "{\"number\":9}"</code>.</p>
<p>Stringified JSON can be produced with the <code>as_stringified_json</code> helper function which wraps <code>jsonlite</code>’s  function. There is a slight difference in behaviour, as this function also automatically unboxes singleton values and also represents <code>NULL</code>s as JSON <code>nulls</code> — a convention that is used by the event body provided by AWS Lambda.</p>
<p>When the result is calculated and ready to be sent back to the AWS Lambda response endpoint it must be formatted in a very specific way in order to be compatible with the API Gateway. The correct format is as below, with the <code>body</code> containing the <em>stringified</em> JSON representation of the result. This is given as an R list which is then converted to stringified JSON. Compare this to the representation of the result for a direct invocation:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Formatting a result for a direct invocation</span></span>
<span><span class="fu"><a href="../reference/as_stringified_json.html">as_stringified_json</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Formatting a result for an invocation via an API Gateway</span></span>
<span><span class="fu"><a href="../reference/as_stringified_json.html">as_stringified_json</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    isBase64Encoded <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    statusCode <span class="op">=</span> <span class="fl">200L</span>,</span>
<span>    body <span class="op">=</span> <span class="fu"><a href="../reference/as_stringified_json.html">as_stringified_json</a></span><span class="op">(</span><span class="va">result</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Here is an example event content from an invocation that is coming via an API Gateway. The invocation is a call to a <code>parity</code> function with an argument <code>number = 9</code>. Some information has been censored.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true"></a><span class="dt">"resource"</span><span class="fu">:</span> <span class="st">"/parity"</span><span class="fu">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true"></a><span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/parity"</span><span class="fu">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true"></a><span class="dt">"httpMethod"</span><span class="fu">:</span> <span class="st">"POST"</span><span class="fu">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true"></a><span class="dt">"headers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true"></a>  <span class="dt">"accept"</span><span class="fu">:</span> <span class="st">"*/*"</span><span class="fu">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true"></a>  <span class="dt">"Host"</span><span class="fu">:</span> <span class="st">"abcdefghijk.execute-api.ap-southeast-2.amazonaws.com"</span><span class="fu">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true"></a>  <span class="dt">"User-Agent"</span><span class="fu">:</span> <span class="st">"curl/7.64.1"</span><span class="fu">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true"></a>  <span class="dt">"X-Amzn-Trace-Id"</span><span class="fu">:</span> <span class="st">"Root=1-615e4711-5f239aad2b046b5609e43b1c"</span><span class="fu">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-For"</span><span class="fu">:</span> <span class="st">"192.168.1.1"</span><span class="fu">,</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-Port"</span><span class="fu">:</span> <span class="st">"443"</span><span class="fu">,</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-Proto"</span><span class="fu">:</span> <span class="st">"https"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true"></a><span class="fu">},</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true"></a><span class="dt">"multiValueHeaders"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true"></a>  <span class="dt">"accept"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true"></a>    <span class="st">"*/*"</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true"></a>  <span class="dt">"Host"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true"></a>    <span class="st">"abcdefghijk.execute-api.ap-southeast-2.amazonaws.com"</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true"></a>  <span class="dt">"User-Agent"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true"></a>    <span class="st">"curl/7.64.1"</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true"></a>  <span class="dt">"X-Amzn-Trace-Id"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true"></a>    <span class="st">"Root=1-615e4711-5f239aad2b046b5609e43b1c"</span></span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-For"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true"></a>    <span class="st">"192.168.1.1"</span></span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-Port"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true"></a>    <span class="st">"443"</span></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true"></a>  <span class="ot">]</span><span class="fu">,</span></span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true"></a>  <span class="dt">"X-Forwarded-Proto"</span><span class="fu">:</span> <span class="ot">[</span></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true"></a>    <span class="st">"https"</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true"></a>  <span class="ot">]</span></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true"></a><span class="fu">},</span></span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true"></a><span class="dt">"queryStringParameters"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true"></a><span class="dt">"multiValueQueryStringParameters"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true"></a><span class="dt">"pathParameters"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true"></a><span class="dt">"stageVariables"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true"></a><span class="dt">"requestContext"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true"></a>  <span class="dt">"resourceId"</span><span class="fu">:</span> <span class="st">"abcdef"</span><span class="fu">,</span></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true"></a>  <span class="dt">"resourcePath"</span><span class="fu">:</span> <span class="st">"/parity"</span><span class="fu">,</span></span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true"></a>  <span class="dt">"httpMethod"</span><span class="fu">:</span> <span class="st">"POST"</span><span class="fu">,</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true"></a>  <span class="dt">"extendedRequestId"</span><span class="fu">:</span> <span class="st">"G0AKsFXISwMFsGA="</span><span class="fu">,</span></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true"></a>  <span class="dt">"requestTime"</span><span class="fu">:</span> <span class="st">"07/Oct/2021:01:02:09 +0000"</span><span class="fu">,</span></span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true"></a>  <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/test/parity"</span><span class="fu">,</span></span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true"></a>  <span class="dt">"accountId"</span><span class="fu">:</span> <span class="st">"1234567890"</span><span class="fu">,</span></span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true"></a>  <span class="dt">"protocol"</span><span class="fu">:</span> <span class="st">"HTTP/1.1"</span><span class="fu">,</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true"></a>  <span class="dt">"stage"</span><span class="fu">:</span> <span class="st">"test"</span><span class="fu">,</span></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true"></a>  <span class="dt">"domainPrefix"</span><span class="fu">:</span> <span class="st">"abcdefghijk"</span><span class="fu">,</span></span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true"></a>  <span class="dt">"requestTimeEpoch"</span><span class="fu">:</span> <span class="dv">1633568529038</span><span class="fu">,</span></span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true"></a>  <span class="dt">"requestId"</span><span class="fu">:</span> <span class="st">"59bbb4c9-9d24-4cbb-941b-60dd4969e9c5"</span><span class="fu">,</span></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true"></a>  <span class="dt">"identity"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true"></a>    <span class="dt">"cognitoIdentityPoolId"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true"></a>    <span class="dt">"accountId"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true"></a>    <span class="dt">"cognitoIdentityId"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true"></a>    <span class="dt">"caller"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true"></a>    <span class="dt">"sourceIp"</span><span class="fu">:</span> <span class="st">"192.168.1.1"</span><span class="fu">,</span></span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true"></a>    <span class="dt">"principalOrgId"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true"></a>    <span class="dt">"accessKey"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true"></a>    <span class="dt">"cognitoAuthenticationType"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true"></a>    <span class="dt">"cognitoAuthenticationProvider"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true"></a>    <span class="dt">"userArn"</span><span class="fu">:</span> <span class="kw">null</span><span class="fu">,</span></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true"></a>    <span class="dt">"userAgent"</span><span class="fu">:</span> <span class="st">"curl/7.64.1"</span><span class="fu">,</span></span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true"></a>    <span class="dt">"user"</span><span class="fu">:</span> <span class="kw">null</span></span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true"></a>  <span class="fu">},</span></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true"></a>  <span class="dt">"domainName"</span><span class="fu">:</span> <span class="st">"abcdefghijk.execute-api.ap-southeast-2.amazonaws.com"</span><span class="fu">,</span></span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true"></a>  <span class="dt">"apiId"</span><span class="fu">:</span> <span class="st">"abcdefghijk"</span></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true"></a><span class="fu">},</span></span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true"></a><span class="dt">"body"</span><span class="fu">:</span> <span class="st">"{</span><span class="ch">\"</span><span class="st">number</span><span class="ch">\"</span><span class="st">:9}"</span><span class="fu">,</span></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true"></a><span class="dt">"isBase64Encoded"</span><span class="fu">:</span> <span class="kw">false</span></span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="html-api-gateway-events">HTML API Gateway events<a class="anchor" aria-label="anchor" href="#html-api-gateway-events"></a>
</h3>
<p>HTML API Gateway events are similar to REST API Gateway events, except that the body is more likely to be Base64 encoded, and the query parameters are presented as string values. That is, we might expect to see a <code>rawQueryString</code> of “parameter1=value1&amp;parameter1=value2&amp;parameter2=value”. In this case however the <code>queryStringParameters</code> (if present) will be easier to work with:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true"></a><span class="er">"queryStringParameters":</span> <span class="fu">{</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true"></a>    <span class="dt">"parameter1"</span><span class="fu">:</span> <span class="st">"value1,value2"</span><span class="fu">,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true"></a>    <span class="dt">"parameter2"</span><span class="fu">:</span> <span class="st">"value"</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true"></a>  <span class="fu">}</span></span></code></pre></div>
<p>A full example of an event body is shown below. Note that the <code>queryStringParameters</code> will not appear if <code>rawQueryString</code> is an empty string.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode json"><code class="sourceCode json"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true"></a><span class="fu">{</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true"></a>    <span class="dt">"version"</span><span class="fu">:</span> <span class="st">"2.0"</span><span class="fu">,</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true"></a>    <span class="dt">"routeKey"</span><span class="fu">:</span> <span class="st">"ANY /parity"</span><span class="fu">,</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true"></a>    <span class="dt">"rawPath"</span><span class="fu">:</span> <span class="st">"/default/parity"</span><span class="fu">,</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true"></a>    <span class="dt">"rawQueryString"</span><span class="fu">:</span> <span class="st">"parameter1=value1&amp;parameter1=value2&amp;parameter2=value"</span><span class="fu">,</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true"></a>    <span class="dt">"queryStringParameters"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true"></a>      <span class="dt">"parameter1"</span><span class="fu">:</span> <span class="st">"value1,value2"</span><span class="fu">,</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true"></a>      <span class="dt">"parameter2"</span><span class="fu">:</span> <span class="st">"value"</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true"></a>    <span class="fu">},</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true"></a>    <span class="dt">"headers"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true"></a>        <span class="dt">"accept"</span><span class="fu">:</span> <span class="st">"*/*"</span><span class="fu">,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true"></a>        <span class="dt">"content-length"</span><span class="fu">:</span> <span class="st">"12"</span><span class="fu">,</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true"></a>        <span class="dt">"content-type"</span><span class="fu">:</span> <span class="st">"application/x-www-form-urlencoded"</span><span class="fu">,</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true"></a>        <span class="dt">"host"</span><span class="fu">:</span> <span class="st">"abcdefghi.execute-api.ap-southeast-2.amazonaws.com"</span><span class="fu">,</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true"></a>        <span class="dt">"user-agent"</span><span class="fu">:</span> <span class="st">"curl/7.64.1"</span><span class="fu">,</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true"></a>        <span class="dt">"x-amzn-trace-id"</span><span class="fu">:</span> <span class="st">"Root=1-6167f9fb-1ada874811eaf2bc1464c679"</span><span class="fu">,</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true"></a>        <span class="dt">"x-forwarded-for"</span><span class="fu">:</span> <span class="st">"192.168.1.1"</span><span class="fu">,</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true"></a>        <span class="dt">"x-forwarded-port"</span><span class="fu">:</span> <span class="st">"443"</span><span class="fu">,</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true"></a>        <span class="dt">"x-forwarded-proto"</span><span class="fu">:</span> <span class="st">"https"</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true"></a>    <span class="fu">},</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true"></a>    <span class="dt">"requestContext"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true"></a>        <span class="dt">"accountId"</span><span class="fu">:</span> <span class="st">"123456789"</span><span class="fu">,</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true"></a>        <span class="dt">"apiId"</span><span class="fu">:</span> <span class="st">"abcdefghi"</span><span class="fu">,</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true"></a>        <span class="dt">"domainName"</span><span class="fu">:</span> <span class="st">"abcdefghi.execute-api.ap-southeast-2.amazonaws.com"</span><span class="fu">,</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true"></a>        <span class="dt">"domainPrefix"</span><span class="fu">:</span> <span class="st">"abcdefghi"</span><span class="fu">,</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true"></a>        <span class="dt">"http"</span><span class="fu">:</span> <span class="fu">{</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true"></a>            <span class="dt">"method"</span><span class="fu">:</span> <span class="st">"POST"</span><span class="fu">,</span></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true"></a>            <span class="dt">"path"</span><span class="fu">:</span> <span class="st">"/default/parity"</span><span class="fu">,</span></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true"></a>            <span class="dt">"protocol"</span><span class="fu">:</span> <span class="st">"HTTP/1.1"</span><span class="fu">,</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true"></a>            <span class="dt">"sourceIp"</span><span class="fu">:</span> <span class="st">"192.168.1.1"</span><span class="fu">,</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true"></a>            <span class="dt">"userAgent"</span><span class="fu">:</span> <span class="st">"curl/7.64.1"</span></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true"></a>        <span class="fu">},</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true"></a>        <span class="dt">"requestId"</span><span class="fu">:</span> <span class="st">"HMP_QiusywMEPEg="</span><span class="fu">,</span></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true"></a>        <span class="dt">"routeKey"</span><span class="fu">:</span> <span class="st">"ANY /parity"</span><span class="fu">,</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true"></a>        <span class="dt">"stage"</span><span class="fu">:</span> <span class="st">"default"</span><span class="fu">,</span></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true"></a>        <span class="dt">"time"</span><span class="fu">:</span> <span class="st">"14/Oct/2021:09:35:55 +0000"</span><span class="fu">,</span></span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true"></a>        <span class="dt">"timeEpoch"</span><span class="fu">:</span> <span class="dv">1634204155055</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true"></a>    <span class="fu">},</span></span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true"></a>    <span class="dt">"body"</span><span class="fu">:</span> <span class="st">"eyJudW1iZXIiOjd9"</span><span class="fu">,</span></span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true"></a>    <span class="dt">"isBase64Encoded"</span><span class="fu">:</span> <span class="kw">true</span></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true"></a><span class="fu">}</span></span></code></pre></div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by David Neuzerling.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
