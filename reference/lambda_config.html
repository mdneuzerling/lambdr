<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Set up endpoints, variables, and configuration for AWS Lambda — lambda_config • lambdr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Set up endpoints, variables, and configuration for AWS Lambda — lambda_config"><meta property="og:description" content='This function provides a configuration object that can be passed to
start_lambda. By default it will use the environment variables
configured by AWS Lambda and so will often work without arguments.
The most important configuration variable is the handler function which
processes invocations of the Lambda. This is configured in any of the three
below ways, in order of decreasing priority:
configured directly through the AWS Lambda console
configured as the CMD argument of the Docker container holding the
runtime
passed as a value to the handler argument of lambda_config


In the first two options, the handler will be made available to the runtime
through the "_HANDLER" environment variable. This function will search for
the function in the given environment.
If the handler accepts a context argument then it will receive a list of
suitable event context for every invocation. This argument must be named
(... will not work), and the configuration may be different for each
invocation type. See the section below for more details.'><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lambdr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.2.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/api-gateway-invocations.html">API Gateway Invocations</a>
    </li>
    <li>
      <a href="../articles/context.html">Using invocation context</a>
    </li>
    <li>
      <a href="../articles/eventbridge-and-sns-invocations.html">EventBridge and SNS Invocations</a>
    </li>
    <li>
      <a href="../articles/lambda-runtime-in-container.html">Placing an R Lambda Runtime in a Container</a>
    </li>
    <li>
      <a href="../articles/package-structure.html">Package Structure</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mdneuzerling/lambdr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Set up endpoints, variables, and configuration for AWS Lambda</h1>
    <small class="dont-index">Source: <a href="https://github.com/mdneuzerling/lambdr/blob/main/R/lambda-config.R" class="external-link"><code>R/lambda-config.R</code></a></small>
    <div class="hidden name"><code>lambda_config.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function provides a configuration object that can be passed to
<code><a href="start_lambda.html">start_lambda</a></code>. By default it will use the environment variables
configured by AWS Lambda and so will often work without arguments.</p>
<p>The most important configuration variable is the handler function which
processes invocations of the Lambda. This is configured in any of the three
below ways, in order of decreasing priority:</p><ol><li><p>configured directly through the AWS Lambda console</p></li>
<li><p>configured as the <code>CMD</code> argument of the Docker container holding the
runtime</p></li>
<li><p>passed as a value to the <code>handler</code> argument of <code>lambda_config</code></p></li>
</ol><p>In the first two options, the handler will be made available to the runtime
through the "_HANDLER" environment variable. This function will search for
the function in the given <code>environ</code>ment.</p>
<p>If the handler accepts a <code>context</code> argument then it will receive a list of
suitable event context for every invocation. This argument must be named
(<code>...</code> will not work), and the configuration may be different for each
invocation type. See the section below for more details.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">lambda_config</span><span class="op">(</span></span>
<span>  handler <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  runtime_api <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  task_root <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  deserialiser <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  serialiser <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  decode_base64 <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  environ <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sys.parent.html" class="external-link">parent.frame</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-handler">handler<a class="anchor" aria-label="anchor" href="#arg-handler"></a></dt>
<dd><p>the function to use for processing inputs from
events. The "_HANDLER" environment variable, as configured in AWS, will
always override this value if present.</p></dd>


<dt id="arg-runtime-api">runtime_api<a class="anchor" aria-label="anchor" href="#arg-runtime-api"></a></dt>
<dd><p>character. Used as the host in the various endpoints used
by AWS Lambda. This argument is provided for debugging and testing only.
The "AWS_LAMBDA_RUNTIME_API" environment variable, as configured by AWS,
will always override this value if present.</p></dd>


<dt id="arg-task-root">task_root<a class="anchor" aria-label="anchor" href="#arg-task-root"></a></dt>
<dd><p>character. Defines the path to the Lambda function code.
This argument is provided for debugging and testing only. The
"LAMBDA_TASK_ROOT" environment variable, as configured by AWS, will always
override this value if present.</p></dd>


<dt id="arg-deserialiser">deserialiser<a class="anchor" aria-label="anchor" href="#arg-deserialiser"></a></dt>
<dd><p>function for deserialising the body of the event. By
default, will attempt to deserialise the body as JSON, based on whether the
input is coming from an API Gateway, scheduled Cloudwatch event, or direct.
To use the body as is, pass the <code>identity</code> function. To ignore the event
content, pass <code>function(x) list()</code>. See the vignettes for details on
parsing invocations from particular sources.</p></dd>


<dt id="arg-serialiser">serialiser<a class="anchor" aria-label="anchor" href="#arg-serialiser"></a></dt>
<dd><p>function for serialising the result before sending.
By default, will attempt to serialise the body as JSON, based on the
request type. To send the result as is, pass the <code>identity</code> function.</p></dd>


<dt id="arg-decode-base-">decode_base64<a class="anchor" aria-label="anchor" href="#arg-decode-base-"></a></dt>
<dd><p>logical. Should Base64 input be automatically decoded?
This is only used for events coming via an API Gateway. Complicated input
(such as images) may be better left as is, so that the handler function can
deal with it appropriately. Defaults to <code>TRUE</code>. Ignored if a custom
<code>deserialiser</code> is used.</p></dd>


<dt id="arg-environ">environ<a class="anchor" aria-label="anchor" href="#arg-environ"></a></dt>
<dd><p>environment in which to search for the function given by the
"_HANDLER" environment variable. Defaults to the parent frame.</p></dd>

</dl></div>
    <div id="details">
    <h2>Details</h2>
    <p>As a rule of thumb, it takes longer to retrieve a value from an environment
variable than it does to retrieve a value from R. This is because retrieving
an environment variable requires a system call. Since the environment
variables do not change in a Lambda instance, we fetch them once and store
them in a configuration object which is passed to the various internal
functions.</p>
    </div>
    <div id="aws-lambda-variables">
    <h2>AWS Lambda variables</h2>



<p>The <code>lambda_config</code> function obtains the configuration values
for the Lambda runtime configures the R session for Lambda based on
environment variables made available by Lambda. The following environment
variables are available:</p><ul><li><p>Lambda Runtime API, available as the "AWS_LAMBDA_RUNTIME_API" environment
variable, is the host of the various HTTP endpoints through which the
runtime interacts with Lambda.</p></li>
<li><p>Lambda Task Root, available as the "LAMBDA_TASK_ROOT" environment variable,
defines the path to the Lambda function code. It isn't used in container
environments with a custom runtime, as that runtime is responsible for
finding and sourcing the function code. Hence, a missing task root is
ignored by this package.</p></li>
<li><p>The handler, available as the "_HANDLER" environment variable, is
interpreted by R as the function that is executed when the Lambda is
called. This value could be anything, as the interpretation is solely up
to the runtime, so requiring it to be a function is a standard imposed by
this package.</p></li>
</ul><p>These <code>handler</code>, <code>runtime_api</code> and <code>task_root</code> arguments to the
<code>lambda_config</code> function can also provide values to these
configuration options, although the environment variables will always be
used if available. While it may be sensible to provide the <code>handler</code>
function directly, the other two configuration options are only provided for
debugging and testing purposes.</p>
    </div>
    <div id="event-context">
    <h2>Event context</h2>


<p>Context is metadata associated with each invocation. If the handler function
accepts a <code>context</code> argument then it will automatically receive at runtime a
named list consisting of these values along with the arguments in the body
(if any). For example, a function such as <code>my_func(x, context)</code> will receive
the context argument automatically. The <code>context</code> argument must be named
(<code>...</code> will not work).</p>
<p>Refer to <code><a href="../articles/lambda-runtime-in-container.html">vignette("lambda-runtime-in-container", package = "lambdr")</a></code>
for details.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by David Neuzerling.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer></div>






  </body></html>

